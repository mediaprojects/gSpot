/* gSpot Version 1.0 - by Mark Smalley - http://www.smalley.my */
/* Mark Smalley on GitHub - https://github.com/msmalley */
(function(a,b,c,d){function H(a,b,c){a.getMarkerClusterer().extend(H,google.maps.OverlayView);this.styles_=b;this.padding_=c||0;this.cluster_=a;this.center_=null;this.map_=a.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_)}function G(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new H(this,a.getStyles(),a.getGridSize())}function F(a,b,c){this.extend(F,google.maps.OverlayView);this.map_=a;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var d=c||{};this.gridSize_=d["gridSize"]||60;this.maxZoom_=d["maxZoom"]||null;this.styles_=d["styles"]||[];this.imagePath_=d["imagePath"];this.imageExtension_=d["imageExtension"];this.zoomOnClick_=d["zoomOnClick"]||true;this.setupStyles_();this.setMap(a);this.prevZoom_=this.map_.getZoom();var e=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var a=e.map_.mapTypes[e.map_.getMapTypeId()].maxZoom;var b=e.map_.getZoom();if(b<0||b>a){return}if(e.prevZoom_!=b){e.prevZoom_=e.map_.getZoom();e.resetViewport()}});google.maps.event.addListener(this.map_,"bounds_changed",function(){e.redraw()});if(b&&b.length){this.addMarkers(b,false)}}function E(a){var b=[[{url:s+"/shadow.png",height:62,width:62,opt_anchor:[16,0],opt_textColor:"#333333",opt_textSize:18},{url:s+"/shadow.png",height:62,width:62,opt_anchor:[16,0],opt_textColor:"#333333",opt_textSize:18},{url:s+"/shadow.png",height:62,width:62,opt_anchor:[16,0],opt_textColor:"#333333",opt_textSize:18}]];if(n[a]){n[a].clearMarkers()}var c=18;var d=75;var e=0;n[a]=new F(g,m[a],{maxZoom:c,gridSize:d,styles:b[e]})}function D(a,b,c,d,e,f,i,l,n){var o=new google.maps.LatLng(b,c);var p=i;var q="default_marker.png";var r="shadow.png";if(n)q=n;var t=new google.maps.MarkerImage(s+"/"+q,new google.maps.Size(26,26),new google.maps.Point(0,0),new google.maps.Point(13,13));var u=new google.maps.MarkerImage(s+"/"+r,new google.maps.Size(62,62),new google.maps.Point(0,0),new google.maps.Point(31,30));j[a][f]=new google.maps.Marker({position:o,icon:t,shadow:u,map:g,title:d});k[a]=[];m[a][h]=j[a][f];if(l===true){if(k[a][f]==null){C(f,a,{latlng:j[a][f].getPosition(),map:j[a][f].map},p,d,e)}}google.maps.event.addListener(j[a][f],"click",function(b){if(k[a][f]==null){C(f,a,{latlng:j[a][f].getPosition(),map:j[a][f].map},p,d,e)}});h++}function C(a,b,c,d,e,f){k[b][a]=function(b,c){x(this,b,c,a)};k[b][a].prototype=new google.maps.OverlayView;k[b][a].prototype.remove=function(){y(this)};k[b][a].prototype.draw=function(){z(this)};k[b][a].prototype.createElement=function(){A(this,d,e,f,a)};k[b][a].prototype.panMap=function(){B(this)};l[b]=[];l[b][a]=new k[b][a](b,{latlng:j[b][a].getPosition(),map:j[b][a].map})}function B(a){var b=a.map_;var c=b.getBounds();if(!c)return;var d=a.latlng_;var e=jQuery(a.div_).width();var f=jQuery(a.div_).height()-100;var g=b.getDiv();var h=g.offsetWidth;var i=g.offsetHeight;var j=c.toSpan();var k=j.lng();var l=j.lat();var m=k/h;var n=l/i;var o=d.lng()+e/2*m;var p=d.lat()-f/2*n;b.panTo(new google.maps.LatLng(p,o));google.maps.event.removeListener(a.boundsChangedListener_);this.boundsChangedListener_=null}function A(a,d,e,f,g){var h=a.getPanes();var i=a.div_;if(!i){i=a.div_=c.createElement("div");jQuery(i).addClass("info-window-wrapper").css({"max-width":a.maxWidth_+"px","min-width":a.minWidth_+"px","max-height":a.maxHeight_+"px"});var j=c.createElement("div");jQuery(j).addClass("info-window-content").css({"max-height":a.maxHeight_-100+"px"}).html(f);var k=c.createElement("div");var l=c.createElement("img");jQuery(l).addClass("close-icon").attr("src",s+"/close.png");var m='<div class="infobox-title"><a href="'+d+'">'+e+"</a></div>";jQuery(k).addClass("info-window-title").html(m);k.appendChild(l);function n(a){return function(){a.setMap(null)}}function o(a){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&c.all){b.event.cancelBubble=true;b.event.returnValue=false}else{a.stopPropagation()}}google.maps.event.addDomListener(l,"click",n(a));google.maps.event.addDomListener(j,"dblclick",o);google.maps.event.addDomListener(j,"mousedown",o);google.maps.event.addDomListener(j,"mousewheel",o);google.maps.event.addDomListener(j,"DOMMouseScroll",o);google.maps.event.addDomListener(j,"mousemove",o);i.appendChild(k);i.appendChild(j);i.style.display="none";h.floatPane.appendChild(i);a.panMap()}else if(i.parentNode!=h.floatPane){i.parentNode.removeChild(i);h.floatPane.appendChild(i)}else{}}function z(a){a.createElement();if(!a.div_)return;var b=a.getProjection().fromLatLngToDivPixel(a.latlng_);if(!b)return;a.div_.style.maxWidth=a.maxWidth_+"px";a.div_.style.left=b.x+a.offsetHorizontal_+"px";a.div_.style.maxHeight=a.maxHeight_+"px";a.div_.style.height="auto";a.div_.style.top=b.y+a.offsetVertical_+"px";a.div_.style.display="block"}function y(a){if(a.div_){a.div_.parentNode.removeChild(a.div_);a.div_=null;k[a.mongo_id]=null}}function x(b,c,d,e){google.maps.OverlayView.call(b);b.latlng_=d.latlng;b.map_=d.map;b.offsetVertical_=-83;b.offsetHorizontal_=36;b.maxHeight_=a(t).height()-90;b.maxWidth_=a(t).width()-200;b.minWidth_=a(t).width()/3;b.mongo_id=e;var f=b;b.boundsChangedListener_=google.maps.event.addListener(g,"bounds_changed",function(){return f.panMap.apply(f)});b.setMap(b.map_)}function w(a){o=new google.maps.LatLng(q,r);g.setCenter(o)}function v(a){if(typeof a=="number"&&isFinite(a)){return true}else{return false}}function u(b,c){this.element=b;this.options=a.extend({},f,c);this._defaults=f;this._name=e;this.init()}var e="gSpot",f={zoom:13,type:"ROADMAP",lat:false,lng:false,imgs:"img/"};var g;var h=0;var j=[];var k=[];var l=[];var m=[];var n=[];var o;var p=[];var q=3.152864;var r=101.712624;var s="img";var t;u.prototype.init=function(){h=0;if(this.options.debug===true){debug.log("This Element = ",this.element);debug.log("Options = ",this.options)}t=this.element;adhoc_zoom=parseInt(a(t).attr("data-zoom"));adhoc_type=a(t).attr("data-type");adhoc_lat=parseFloat(a(t).attr("data-lat"));adhoc_lng=parseFloat(a(t).attr("data-lng"));adhoc_title=a(t).attr("data-title");adhoc_slug=a(t).attr("data-slug");adhoc_open=a(t).attr("data-open");adhoc_icon=a(t).attr("data-icon");adhoc_content=a(t).html();ajax=a(t).attr("data-ajax");if(adhoc_zoom!==null&&adhoc_zoom!==false&&!this.options.zoom||a(t).attr("data-override")=="true"&&adhoc_zoom){this.options.zoom=adhoc_zoom}if(adhoc_type!==null&&adhoc_type!==false&&!this.options.type||a(t).attr("data-override")=="true"&&adhoc_type){this.options.type=adhoc_type}if(!v(this.options.lat)&&this.options.lat!==null){if(adhoc_lat)this.options.lat=adhoc_lat;else this.options.lat=q}if(!v(this.options.lng)&&this.options.lng!==null){if(adhoc_lng)this.options.lng=adhoc_lng;else this.options.lng=r}var b=false;if(this.options.type=="SATELLITE"){b=google.maps.MapTypeId.SATELLITE}else if(this.options.type=="HYBRID"){b=google.maps.MapTypeId.HYBRID}else if(this.options.type=="TERRAIN"){b=google.maps.MapTypeId.TERRAIN}else{b=google.maps.MapTypeId.ROADMAP}if(this.options.imgs!==null||this.options.imgs!==false){s=this.options.imgs}m[a(this.element).attr("id")]=[];if(!v(this.options.zoom)&&this.options.zoom!==false){this.options.zoom=13}if(this.options.zoom<1)this.options.zoom=1;else if(this.options.zoom>16)this.options.zoom=17;var d={zoom:this.options.zoom,mapTypeId:b};g=new google.maps.Map(c.getElementById(a(this.element).attr("id")),d);html5_status=false;if(this.options.lat===false&&this.options.lng===false){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){html5_status="Browser supports and uses HTML5 Geo-Location";o=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);g.setCenter(o)},function(){html5_status="Browser supports HTML5 Geo-Location";w(true)})}else{html5_status="Browser does not support HTML5 Geo-Location";w(false)}}else{html5_status="Specific Lat / Lng Used";p["lat"]=this.options.lat;p["lng"]=this.options.lng;o=new google.maps.LatLng(this.options.lat,this.options.lng);g.setCenter(o)}if(this.options.debug===true){debug.log("HTML5 Status = ",html5_status);debug.log("THIS LAT = ",this.options.lat);debug.log("THIS LNG = ",this.options.lng)}adhoc_marker=false;if(adhoc_lat!==null&&adhoc_lat!==false&&adhoc_lng!==null&&adhoc_lng!==false){if(v(adhoc_lat)&&v(adhoc_lng)){adhoc_marker=new Object;adhoc_marker["this_id"]=a(this.element).attr("id");if(!this.options.markers)this.options.markers=[];if(adhoc_lat!==null&&adhoc_lat!==false){adhoc_marker["lat"]=adhoc_lat}if(adhoc_lng!==null&&adhoc_lng!==false){adhoc_marker["lng"]=adhoc_lng}if(adhoc_title!==null&&adhoc_title!==false){adhoc_marker["title"]=adhoc_title}if(adhoc_slug!==null&&adhoc_slug!==false){adhoc_marker["slug"]=adhoc_slug}if(adhoc_content!==null&&adhoc_content!==false){adhoc_marker["content"]=adhoc_content}if(adhoc_open===true||adhoc_open==="true"){adhoc_marker["open"]=true}if(adhoc_icon!==null||adhoc_icon!==false){adhoc_marker["icon"]=adhoc_icon}this.options.markers[this.options.markers.length]=adhoc_marker;if(this.options.debug===true){debug.log("adhoc_marker = ",adhoc_marker)}}}if(this.options.debug===true){debug.log("Markers = ",this.options.markers)}j[a(t).attr("id")]=[];if(ajax){a.ajax({url:ajax,dataType:"json",success:function(b){these_markers=b;for(i=0;i<these_markers.length;i++){open_window=false;if(these_markers[i].open===true)open_window=true;D(a(t).attr("id"),these_markers[i].lat,these_markers[i].lng,these_markers[i].title,these_markers[i].content,these_markers[i].this_id,these_markers[i].slug,open_window,these_markers[i].icon)}if(these_markers.length>0){E(a(t).attr("id"))}}})}else{for(i=0;i<this.options.markers.length;i++){if(this.options.debug===true){debug.log("This Marker = ",this.options.markers[i])}open_window=false;if(this.options.markers[i].open===true)open_window=true;D(a(t).attr("id"),this.options.markers[i].lat,this.options.markers[i].lng,this.options.markers[i].title,this.options.markers[i].content,this.options.markers[i].this_id,this.options.markers[i].slug,open_window,this.options.markers[i].icon)}}if(this.options.markers.length>0){E(a(t).attr("id"))}};F.prototype.extend=function(a,b){return function(a){for(property in a.prototype){this.prototype[property]=a.prototype[property]}return this}.apply(a,[b])};F.prototype.onAdd=function(){this.setReady_(true)};F.prototype.idle=function(){};F.prototype.draw=function(){};F.prototype.setupStyles_=function(){for(var a=0,b;b=this.sizes[a];a++){this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:b,width:b})}};F.prototype.setStyles=function(a){this.styles_=a};F.prototype.getStyles=function(){return this.styles_};F.prototype.isZoomOnClick=function(){return this.zoomOnClick_};F.prototype.getMarkers=function(){return this.markers_};F.prototype.getTotalMarkers=function(){return this.markers_};F.prototype.setMaxZoom=function(a){this.maxZoom_=a};F.prototype.getMaxZoom=function(){return this.maxZoom_||this.map_.mapTypes[this.map_.getMapTypeId()].maxZoom};F.prototype.calculator_=function(a,b){var c=0;var d=a.length;var e=d;while(e!==0){e=parseInt(e/10,10);c++}c=Math.min(c,b);return{text:d,index:c}};F.prototype.setCalculator=function(a){this.calculator_=a};F.prototype.getCalculator=function(){return this.calculator_};F.prototype.addMarkers=function(a,b){for(var c=0,d;d=a[c];c++){this.pushMarkerTo_(d)}if(!b){this.redraw()}};F.prototype.pushMarkerTo_=function(a){a.setVisible(false);a.setMap(null);a.isAdded=false;if(a["draggable"]){var b=this;google.maps.event.addListener(a,"dragend",function(){a.isAdded=false;b.resetViewport();b.redraw()})}this.markers_.push(a)};F.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);if(!b){this.redraw()}};F.prototype.removeMarker=function(a){var b=-1;if(this.markers_.indexOf){b=this.markers_.indexOf(a)}else{for(var c=0,d;d=this.markers_[c];c++){if(d==a){b=c;continue}}}if(b==-1){return false}this.markers_.splice(b,1);a.setVisible(false);a.setMap(null);this.resetViewport();this.redraw();return true};F.prototype.setReady_=function(a){if(!this.ready_){this.ready_=a;this.createClusters_()}};F.prototype.getTotalClusters=function(){return this.clusters_.length};F.prototype.getMap=function(){return this.map_};F.prototype.setMap=function(a){this.map_=a};F.prototype.getGridSize=function(){return this.gridSize_};F.prototype.setGridSize=function(a){this.gridSize_=a};F.prototype.getExtendedBounds=function(a){var b=this.getProjection();var c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng());var d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng());var e=b.fromLatLngToDivPixel(c);e.x+=this.gridSize_;e.y-=this.gridSize_;var f=b.fromLatLngToDivPixel(d);f.x-=this.gridSize_;f.y+=this.gridSize_;var g=b.fromDivPixelToLatLng(e);var h=b.fromDivPixelToLatLng(f);a.extend(g);a.extend(h);return a};F.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};F.prototype.clearMarkers=function(){this.resetViewport();this.markers_=[]};F.prototype.resetViewport=function(){for(var a=0,b;b=this.clusters_[a];a++){b.remove()}for(var a=0,c;c=this.markers_[a];a++){c.isAdded=false;c.setMap(null);c.setVisible(false)}this.clusters_=[]};F.prototype.redraw=function(){this.createClusters_()};F.prototype.createClusters_=function(){if(!this.ready_){return}var a=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var b=this.getExtendedBounds(a);for(var c=0,d;d=this.markers_[c];c++){var e=false;if(!d.isAdded&&this.isMarkerInBounds_(d,b)){for(var f=0,g;g=this.clusters_[f];f++){if(!e&&g.getCenter()&&g.isMarkerInClusterBounds(d)){e=true;g.addMarker(d);break}}if(!e){var g=new G(this);g.addMarker(d);this.clusters_.push(g)}}}};G.prototype.isMarkerAlreadyAdded=function(a){if(this.markers_.indexOf){return this.markers_.indexOf(a)!=-1}else{for(var b=0,c;c=this.markers_[b];b++){if(c==a){return true}}}return false};G.prototype.addMarker=function(a){if(this.isMarkerAlreadyAdded(a)){return false}if(!this.center_){this.center_=a.getPosition();this.calculateBounds_()}if(this.markers_.length==0){a.setMap(this.map_);a.setVisible(true)}else if(this.markers_.length==1){this.markers_[0].setMap(null);this.markers_[0].setVisible(false)}a.isAdded=true;this.markers_.push(a);this.updateIcon();return true};G.prototype.getMarkerClusterer=function(){return this.markerClusterer_};G.prototype.getBounds=function(){this.calculateBounds_();return this.bounds_};G.prototype.remove=function(){this.clusterIcon_.remove();delete this.markers_};G.prototype.getCenter=function(){return this.center_};G.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};G.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};G.prototype.getMap=function(){return this.map_};G.prototype.updateIcon=function(){var a=this.map_.getZoom();var b=this.markerClusterer_.getMaxZoom();if(a>b){for(var c=0,d;d=this.markers_[c];c++){d.setMap(this.map_);d.setVisible(true)}return}if(this.markers_.length<2){this.clusterIcon_.hide();return}var e=this.markerClusterer_.getStyles().length;var f=this.markerClusterer_.getCalculator()(this.markers_,e);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(f);this.clusterIcon_.show()};H.prototype.triggerClusterClick=function(){var a=this.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"clusterclick",[this.cluster_]);if(a.isZoomOnClick()){this.map_.panTo(this.cluster_.getCenter());this.map_.fitBounds(this.cluster_.getBounds())}};H.prototype.onAdd=function(){this.div_=c.createElement("DIV");if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.innerHTML=this.sums_.text}var b=this.getPanes();b.overlayImage.appendChild(this.div_);var d=this;google.maps.event.addDomListener(this.div_,"click",function(){d.triggerClusterClick()})};H.prototype.getPosFromLatLng_=function(a){var b=this.getProjection().fromLatLngToDivPixel(a);b.x-=parseInt(this.width_/2,10);b.y-=parseInt(this.height_/2,10);return b};H.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};H.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};H.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.style.display=""}this.visible_=true};H.prototype.remove=function(){this.setMap(null)};H.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};H.prototype.setSums=function(a){this.sums_=a;this.text_=a.text;this.index_=a.index;if(this.div_){this.div_.innerHTML=a.text}this.useStyle()};H.prototype.useStyle=function(){var a=Math.max(0,this.sums_.index-1);a=Math.min(this.styles_.length-1,a);var b=this.styles_[a];this.url_=b.url;this.height_=b.height;this.width_=b.width;this.textColor_=b.opt_textColor;this.anchor=b.opt_anchor;this.textSize_=b.opt_textSize};H.prototype.setCenter=function(a){this.center_=a};H.prototype.createCss=function(a){var b=[];if(c.all){b.push("filter:progid:DXImageTransform.Microsoft.AlphaImageLoader("+'sizingMethod=scale,src="'+this.url_+'");')}else{b.push("background:url("+this.url_+");")}if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){b.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{b.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){b.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{b.push("width:"+this.width_+"px; text-align:center;")}}else{b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}var d=this.textColor_?this.textColor_:"black";var e=this.textSize_?this.textSize_:11;b.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+d+"; position:absolute; font-size:"+e+"px; font-family:Arial,sans-serif; font-weight:bold");return b.join("")};b["MarkerClusterer"]=F;F.prototype["addMarker"]=F.prototype.addMarker;F.prototype["addMarkers"]=F.prototype.addMarkers;F.prototype["clearMarkers"]=F.prototype.clearMarkers;F.prototype["getCalculator"]=F.prototype.getCalculator;F.prototype["getGridSize"]=F.prototype.getGridSize;F.prototype["getMap"]=F.prototype.getMap;F.prototype["getMarkers"]=F.prototype.getMarkers;F.prototype["getMaxZoom"]=F.prototype.getMaxZoom;F.prototype["getStyles"]=F.prototype.getStyles;F.prototype["getTotalClusters"]=F.prototype.getTotalClusters;F.prototype["getTotalMarkers"]=F.prototype.getTotalMarkers;F.prototype["redraw"]=F.prototype.redraw;F.prototype["removeMarker"]=F.prototype.removeMarker;F.prototype["resetViewport"]=F.prototype.resetViewport;F.prototype["setCalculator"]=F.prototype.setCalculator;F.prototype["setGridSize"]=F.prototype.setGridSize;F.prototype["onAdd"]=F.prototype.onAdd;F.prototype["draw"]=F.prototype.draw;F.prototype["idle"]=F.prototype.idle;H.prototype["onAdd"]=H.prototype.onAdd;H.prototype["draw"]=H.prototype.draw;H.prototype["onRemove"]=H.prototype.onRemove;b.debug=function(){function m(a){return g>0?g>a:h.length+g<=a}function l(b){if(e&&(f||!c||!c.log)){e.apply(a,b)}}var a=this,b=Array.prototype.slice,c=a.console,d={},e,f,g=9,h=["error","warn","info","debug","log"],i="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),j=i.length,k=[];while(--j>=0){(function(a){d[a]=function(){g!==0&&c&&c[a]&&c[a].apply(c,arguments)}})(i[j])}j=h.length;while(--j>=0){(function(e,f){d[f]=function(){var d=b.call(arguments),g=[f].concat(d);k.push(g);l(g);if(!c||!m(e)){return}c.firebug?c[f].apply(a,d):c[f]?c[f](d):c.log(d)}})(j,h[j])}d.setLevel=function(a){g=typeof a==="number"?a:9};d.setCallback=function(){var a=b.call(arguments),c=k.length,d=c;e=a.shift()||null;f=typeof a[0]==="boolean"?a.shift():false;d-=typeof a[0]==="number"?a.shift():c;while(d<c){l(k[d++])}};return d}();a.fn[e]=function(b){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new u(this,b))}})}})(jQuery,window,document)